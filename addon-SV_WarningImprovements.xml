<?xml version="1.0" encoding="utf-8"?>
<addon addon_id="SV_WarningImprovements" title="Warning Improvements" version_string="1.7.1" version_id="1070100" url="https://xenforo.com/community/resources/warning-improvements-by-xon.4156/" install_callback_class="SV_WarningImprovements_Installer" install_callback_method="install" uninstall_callback_class="SV_WarningImprovements_Installer" uninstall_callback_method="uninstall">
  <admin_navigation/>
  <admin_permissions/>
  <admin_style_properties/>
  <admin_templates>
    <template title="option_list_option_textbox_autocomplete"><![CDATA[<xen:textboxunit label="{$preparedOption.title}" name="{$fieldPrefix}[{$preparedOption.option_id}]" value="{$preparedOption.option_value}"
hint="{$formatParams.hint}" placeholder="{$formatParams.placeholder}" type="{$formatParams.type}" size="{$formatParams.size}" maxlength="{$formatParams.maxlength}" rows="{$formatParams.rows}" inputclass="Elastic AutoComplete AcSingle">
	<xen:explain>{xen:raw $preparedOption.explain}</xen:explain>
	<xen:html>
		<xen:include template="option_list_option_editlink" />
		<input type="hidden" name="{$listedFieldName}" value="{$preparedOption.option_id}" />
		{xen:raw $editLink}
	</xen:html>
</xen:textboxunit>]]></template>
    <template title="sv_warningimprovements_criteria"><![CDATA[	<li><label>
		<input type="checkbox" name="user_criteria[warning_points_l][rule]" value="warning_points_l" class="Disabler" id="ucrit_warning_points_l" {xen:checked $userCriteria.warning_points_l} />
		{xen:phrase user_has_received_at_least_x_warnings_points}:</label>
		<div class="criteriaQualifier" id="ucrit_warning_points_l_Disabler">
			<xen:spinbox name="user_criteria[warning_points_l][data][points]" value="{$userCriteria.warning_points_l.points}" size="5" min="0" step="1" />
			{xen:phrase days}: <xen:spinbox name="user_criteria[warning_points_l][data][days]" value="{$userCriteria.warning_points_l.days}" size="5" min="0" step="1" />
			<br/><input type="checkbox" name="user_criteria[sv_warning_minimum][data][expired]" value="1" {xen:checked $userCriteria.sv_warning_minimum.expired} /> {xen:phrase sv_warning_include_expired}
		</div>
	</li>
	<li><label>
		<input type="checkbox" name="user_criteria[warning_points_m][rule]" value="warning_points_m" class="Disabler" id="ucrit_warning_points_m" {xen:checked $userCriteria.warning_points_m} />
		{xen:phrase user_has_received_at_most_x_warnings_points}:</label>
		<div class="criteriaQualifier" id="ucrit_warning_points_m_Disabler">
			<xen:spinbox name="user_criteria[warning_points_m][data][points]" value="{$userCriteria.warning_points_m.points}" size="5" min="0" step="1" />
			{xen:phrase days}: <xen:spinbox name="user_criteria[warning_points_m][data][days]" value="{$userCriteria.warning_points_m.days}" size="5" min="0" step="1" />
			<br/><input type="checkbox" name="user_criteria[sv_warning_minimum][data][expired]" value="1" {xen:checked $userCriteria.sv_warning_minimum.expired} /> {xen:phrase sv_warning_include_expired}
		</div>
	</li>
	<li><label>
		<input type="checkbox" name="user_criteria[sv_warning_minimum][rule]" value="sv_warning_minimum" class="Disabler" id="ucrit_sv_warning_minimum" {xen:checked $userCriteria.sv_warning_minimum} />
		{xen:phrase user_has_received_at_least_x_warnings_count}:</label>
		<div class="criteriaQualifier" id="ucrit_sv_warning_minimum_Disabler">
			<xen:spinbox name="user_criteria[sv_warning_minimum][data][count]" value="{$userCriteria.sv_warning_minimum.count}" size="5" min="0" step="1" />
			{xen:phrase days}: <xen:spinbox name="user_criteria[sv_warning_minimum][data][days]" value="{$userCriteria.sv_warning_minimum.days}" size="5" min="0" step="1" />
			<br/><input type="checkbox" name="user_criteria[sv_warning_minimum][data][expired]" value="1" {xen:checked $userCriteria.sv_warning_minimum.expired} /> {xen:phrase sv_warning_include_expired}
		</div>
	</li>
	<li><label>
		<input type="checkbox" name="user_criteria[sv_warning_maximum][rule]" value="sv_warning_maximum" class="Disabler" id="ucrit_sv_warning_maximum" {xen:checked $userCriteria.sv_warning_maximum} />
		{xen:phrase user_has_received_at_most_x_warnings_count}:</label>
		<div class="criteriaQualifier" id="ucrit_sv_warning_maximum_Disabler">
			<xen:spinbox name="user_criteria[sv_warning_maximum][data][count]" value="{$userCriteria.sv_warning_maximum.count}" size="5" min="0" step="1" />
			{xen:phrase days}: <xen:spinbox name="user_criteria[sv_warning_maximum][data][days]" value="{$userCriteria.sv_warning_maximum.days}" size="5" min="0" step="1" />
			<br/><input type="checkbox" name="user_criteria[sv_warning_minimum][data][expired]" value="1" {xen:checked $userCriteria.sv_warning_minimum.expired} /> {xen:phrase sv_warning_include_expired}
		</div>
	</li>]]></template>
    <template title="sv_warningimprovements_escalating_defaults"><![CDATA[<xen:if is="{$warningEscalatingDefaults}">
	<xen:form action="{xen:adminlink warnings}" class="section">
		<h2 class="subHeading">
			{xen:phrase warning_escalating_defaults}
		</h2>

		<ol class="FilterList Scrollable">
			<xen:foreach loop="$warningEscalatingDefaults" value="$warningDefault">
				<xen:set var="$expiry_extension_phrase">{xen:phrase x_days, 'days={$warningDefault.expiry_extension}'}</xen:set>
				<xen:if is="{$warningDefault.expiry_type} == 'weeks'">
					<xen:set var="$expiry_extension_phrase">{xen:phrase sv_x_weeks, 'weeks={$warningDefault.expiry_extension}'}</xen:set>
				</xen:if>
				<xen:if is="{$warningDefault.expiry_type} == 'months'">
					<xen:set var="$expiry_extension_phrase">{xen:phrase x_months, 'months={$warningDefault.expiry_extension}'}</xen:set>
				</xen:if>
				<xen:if is="{$warningDefault.expiry_type} == 'years'">
					<xen:set var="$expiry_extension_phrase">{xen:phrase sv_x_years, 'years={$warningDefault.expiry_extension}'}</xen:set>
				</xen:if>
				<xen:listitem
					id="warning_default-{$warningDefault.warning_default_id}"
				    label="{xen:phrase points}: {$warningDefault.threshold_points}"
					href="{xen:adminlink warnings/default/edit, $warningDefault}"
					delete="{xen:adminlink warnings/default/delete, $warningDefault}"
				>
					<xen:snippet>
						{xen:phrase sv_increase_default_expiry_by_x, 'length={$expiry_extension_phrase}'}
						{xen:if "{$warningDefault.active}", ", {xen:phrase sv_warning_default_is_active}" }
					</xen:snippet>
				</xen:listitem>
			</xen:foreach>
		</ol>
	</xen:form>
</xen:if>]]></template>
    <template title="sv_warningimprovements_warning_default_delete"><![CDATA[<xen:title>{xen:phrase sv_confirm_deletion_of_warning_default}</xen:title>

<xen:require css="public:delete_confirmation.css" />

<xen:form action="{xen:adminlink 'warnings/default/delete', $default}" class="deleteConfirmForm formOverlay">

	<p>{xen:phrase please_confirm_that_you_want_to_delete_following_warning_action}:</p>
	<strong><a href="{xen:adminlink 'warnings/default/edit', $default}">{xen:phrase points}: {$default.threshold_points}</a></strong>

	<xen:submitunit save="{xen:phrase sv_delete_warning_default}" />
	<input type="hidden" name="_xfConfirm" value="1" />

</xen:form>]]></template>
    <template title="sv_warningimprovements_warning_default_edit"><![CDATA[<xen:title>{xen:if $default.warning_default_id, '{xen:phrase sv_edit_warning_default}', '{xen:phrase sv_create_new_warning_default}'}</xen:title>

<xen:form action="{xen:adminlink warnings/default/save, $default}" class="AutoValidator" data-redirect="yes">
	<xen:spinboxunit label="{xen:phrase points_threshold}:" explain="{xen:phrase sv_warning_default_applied_crossing_threshold}" name="threshold_points" value="{$default.threshold_points}" min="0" />

	<xen:spinboxunit label="{xen:phrase sv_warning_expiry_extension}:" explain="{xen:phrase sv_warning_expiry_extension_explain}" name="expiry_extension" value="{xen:if $default.expiry_extension, $default.expiry_extension, 1}" min="0" >
		<xen:select name="expiry_type" value="{xen:if $default.expiry_type, $default.expiry_type, 'months'}"
		inputclass="autoSize">
			<xen:option value="days">{xen:phrase days}</xen:option>
			<xen:option value="weeks">{xen:phrase weeks}</xen:option>
			<xen:option value="months">{xen:phrase months}</xen:option>
			<xen:option value="years">{xen:phrase years}</xen:option>
		</xen:select>
	</xen:spinboxunit>

	<xen:checkboxunit label="" listclass="checkboxColumns">
		<xen:option name="active" value="1" selected="{$default.active}">{xen:phrase sv_warning_default_is_active}</xen:option>
	</xen:checkboxunit>

	<xen:submitunit save="{xen:phrase sv_save_warning_default}">
		<xen:if is="{$default.warning_default_id}">
			<input type="button" value="{xen:phrase sv_delete_warning_default}..." accesskey="d" class="button OverlayTrigger"
				data-href="{xen:adminlink warnings/default/delete, $default}" />
		</xen:if>
	</xen:submitunit>
</xen:form>]]></template>
    <template title="sv_warning_action_edit"><![CDATA[<fieldset>
	<xen:selectunit label="{xen:phrase sv_warning_category}:" name="sv_warning_category_id" value="{$action.sv_warning_category_id}">
		<xen:option value="0" label="({xen:phrase none})" />
		<xen:options source="$warningCategories" />
	</xen:selectunit>
</fieldset>

<fieldset>
	<xen:selectunit label="{xen:phrase sv_warning_node_id}:" name="sv_post_node_id" value="{$action.sv_post_node_id}">
		<xen:options source="$nodeList" />
		<xen:explain>{xen:phrase sv_warning_action_post_new_thread}</xen:explain>
	</xen:selectunit>

	<xen:spinboxunit label="{xen:phrase sv_warning_thread_id}:" explain="{xen:phrase sv_warning_action_post_thread_reply}" name="sv_post_thread_id" value="{$action.sv_post_thread_id}" />
	<xen:spinboxunit label="{xen:phrase sv_warning_post_as_user_id}:" explain="{xen:phrase sv_warning_action_post_as_user}" name="sv_post_as_user_id" value="{$action.sv_post_as_user_id}" />
</fieldset>]]></template>
    <template title="sv_warning_action_list"><![CDATA[<xen:if is="{$warningActionCategories}">
	<xen:form action="{xen:adminlink warnings}" class="section">
		<h2 class="subHeading">
			{xen:phrase warning_actions}
		</h2>

		<ol class="FilterList Scrollable">
			<xen:foreach loop="$warningActionCategories" key="$warningActionCategoryId" value="$warningActionCategory">
				<li>
					<h3 class="textHeading" style="text-align: right">
						<span style="float: left">
							<xen:if is="{$warningActionCategoryId}">
								<a href="{xen:adminlink warnings/category-edit, '', 'warning_category_id={$warningActionCategoryId}'}" title="{xen:phrase edit_category}">{$warningActionCategory.title}</a>
							<xen:else />
								{xen:phrase sv_global_warning_actions}
							</xen:if>
						</span>
						<span style="font-weight: normal">
							<xen:if is="{$warningActionCategoryId}">
								<a href="{xen:adminlink warnings/category-edit, '', 'warning_category_id={$warningActionCategoryId}'}" title="{xen:phrase edit_category}">{xen:phrase edit}</a>
								|
							</xen:if>
							<a href="{xen:adminlink warnings/action-add, '', 'warning_category_id={$warningActionCategoryId}'}">{xen:phrase create_new_warning_action}</a>
						</span>
					</h3>
					<ol>
						<xen:foreach loop="$warningActionCategory.actions" value="$action">
							<xen:listitem
								id="action-{$action.warning_action_id}"
								label="{xen:phrase points}: {$action.points}"
								href="{xen:adminlink warnings/action/edit, $action}"
								delete="{xen:adminlink warnings/action/delete, $action}"
							>
								<xen:snippet>
									{xen:if "{$action.action} == 'ban'", '{xen:phrase ban}',
										{xen:if "{$action.action} == 'discourage'", '{xen:phrase discourage}',
										{xen:if "{$action.action} == 'groups'", '{xen:phrase add_to_selected_groups}'}
									}},
									{xen:if "{$action.action_length_type} == 'permanent'", '{xen:phrase permanent}',
										{xen:if "{$action.action_length_type} == 'points'", '{xen:phrase while_at_or_above_points_threshold}',
										'{xen:phrase temporary}'
									}}
								</xen:snippet>
							</xen:listitem>
						</xen:foreach>
					</ol>
				</li>
			</xen:foreach>
		</ol>
	</xen:form>
</xen:if>]]></template>
    <template title="sv_warning_category_delete"><![CDATA[<xen:title>{xen:phrase sv_confirm_deletion_of_warning_category}: {$warningCategory.title}</xen:title>
<xen:h1>{xen:phrase sv_confirm_deletion_of_warning_category}</xen:h1>

<xen:navigation>
	<xen:breadcrumb href="{xen:adminlink 'warnings/category-edit', '', 'warning_category_id={$warningCategory.warning_category_id}'}">{$warningCategory.title}</xen:breadcrumb>
</xen:navigation>

<xen:require css="public:delete_confirmation.css" />

<xen:form action="{xen:adminlink 'warnings/category-delete', '', 'warning_category_id={$warningCategory.warning_category_id}'}" class="deleteConfirmForm">
	<p>{xen:phrase sv_please_confirm_that_you_want_to_delete_following_warning_category}:</p>
	<strong><a href="{xen:adminlink 'warnings/category-edit', '','warning_category_id={$warningCategory.warning_category_id}'}">{$warningCategory.title}</a></strong>
	<p>{xen:phrase sv_confirm_delete_warning_category_footnote}</p>

	<xen:submitunit save="{xen:phrase sv_delete_warning_category}" />

	<input type="hidden" name="_xfConfirm" value="1" />
</xen:form>]]></template>
    <template title="sv_warning_category_edit"><![CDATA[<xen:title>{xen:if '{$warningCategory.warning_category_id}', '{xen:phrase sv_edit_warning_category}: {$warningCategory.title}', '{xen:phrase sv_create_new_warning_category}'}</xen:title>

<xen:if is="{$warningCategory.warning_category_id}">
	<xen:navigation>
		<xen:breadcrumb href="{xen:adminlink warnings}#_category-{$warningCategory.warning_category_id}">{$warningCategory.title}</xen:breadcrumb>
	</xen:navigation>
</xen:if>

<xen:form class="AutoValidator"
	action="{xen:adminlink 'warnings/category-save', '', 'warning_category_id={$warningCategory.warning_category_id}'}"
	data-redirect="on">

	<xen:textboxunit label="{xen:phrase title}:" name="title" value="{$warningCategory.title}" data-optinout="OptOut" data-livetitletemplate="{xen:if {$warningCategory.warning_category_id},
		'{xen:phrase sv_edit_warning_category}: <em>%s</em>',
		'{xen:phrase sv_create_new_warning_category}: <em>%s</em>'}" />

	<xen:selectunit label="{xen:phrase sv_parent_category}:" name="parent_warning_category_id" value="{$warningCategory.parent_warning_category_id}">
		<xen:option value="0" label="({xen:phrase none})" />
		<xen:options source="$warningCategories" />
	</xen:selectunit>

	<xen:spinboxunit label="{xen:phrase display_order}:" name="display_order" value="{$warningCategory.display_order}" min="0" step="10" />

	<xen:checkboxunit id="allowedUserGroups" label="{xen:phrase sv_allowed_user_groups}:" name="allowed_user_group_ids[]" listclass="checkboxColumns">
		<xen:hint><br /><label><input type="checkbox" class="CheckAll" data-target="#allowedUserGroups" /> {xen:phrase select_all}</label></xen:hint>
		<xen:options source="$userGroups" />
	</xen:checkboxunit>

	<xen:submitunit save="{xen:phrase sv_save_warning_category}">
		<xen:if is="{$warningCategory.warning_category_id}"><a href="{xen:adminlink 'warnings/category-delete', '', 'warning_category_id={$warningCategory.warning_category_id}'}" class="button OverlayTrigger">{xen:phrase sv_delete_warning_category}...</a></xen:if>
	</xen:submitunit>
</xen:form>]]></template>
    <template title="sv_warning_edit_inputs"><![CDATA[<fieldset>
	<xen:selectunit label="{xen:phrase sv_warning_category}:" name="sv_warning_category_id" value="{$warning.sv_warning_category_id}">
		<xen:options source="$warningCategories" />
	</xen:selectunit>

	<xen:spinboxunit label="{xen:phrase display_order}:" name="sv_display_order" value="{$warning.sv_display_order}" min="0" step="10" />
</fieldset>]]></template>
    <template title="sv_warning_list_jstree"><![CDATA[<link rel="stylesheet" href="styles/jstree/default/style.min.css" />
<xen:require css="sv_warning_list_jstree.css" />

<xen:if is="{$debugMode}">
	<xen:require js="js/jsTree/jstree.js" />
	<xen:require js="js/SV/WarningImprovements/full/warnings.js" />
<xen:else />
	<xen:require js="js/jsTree/jstree.min.js" />
	<xen:require js="js/SV/WarningImprovements/warnings.js" />
</xen:if>

<div class="section">
	<h2 class="subHeading">
		{xen:phrase warnings}
		<xen:if is="{$warnings}">
			<div class="warningItemTreeSearch">
				<input id="warningItemTreeSearch" type="search" name="filter" placeholder="{xen:phrase filter_items}" class="textCtrl">
			</div>
		</xen:if>
	</h2>

	<xen:if is="{$warnings}">
		<div id="warningitems" class="WarningItemTree"
			data-overlay="1"
			data-searchinput="#warningItemTreeSearch"
			data-loadurl="{xen:adminlink warnings/load-tree}"
			data-syncurl="{xen:adminlink warnings/sync-tree}"
			data-renameurl="{xen:adminlink warnings/rename-tree-item}"
			data-categoryediturl="{xen:adminlink 'warnings/category-edit&warning_category_id={id}'}"
			data-categorydeleteurl="{xen:adminlink 'warnings/category-delete&warning_category_id={id}'}"
			data-warningediturl="{xen:adminlink 'warnings/{id}/edit'}"
			data-warningdeleteurl="{xen:adminlink 'warnings/{id}/delete'}"
			data-renametext="{xen:phrase sv_rename}"
			data-edittext="{xen:phrase edit}"
			data-deletetext="{xen:phrase delete}">
		</div>
	<xen:else />
		<div class="noResults">{xen:phrase no_warnings_have_been_defined}</div>
	</xen:if>
</div>]]></template>
    <template title="sv_warning_list_jstree.css"><![CDATA[.subHeading .warningItemTreeSearch
{
	float: right;
	margin-top: -3px;
	max-height: 22px;
	overflow: hidden;
}

.subHeading .warningItemTreeSearch .textCtrl
{
	padding-top: 2px;
	padding-bottom: 2px;
	font-size: 11px;
	height: 13px;
	box-sizing: content-box;
}

.jstree-contextmenu
{
	z-index: 100;
}]]></template>
  </admin_templates>
  <admin_template_modifications>
    <modification template="warning_edit" modification_key="SV_WarningImprovements_warning_edit1" description="Special case editing the Custom Warning - 1" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[{xen:adminlink warnings/save, $warning}]]></find>
      <replace><![CDATA[{xen:if '{$warning.is_custom}', '{xen:adminlink warnings/save}', '{xen:adminlink warnings/save, $warning}'}]]></replace>
    </modification>
    <modification template="warning_edit" modification_key="SV_WarningImprovements_warning_edit2" description="Special case editing the Custom Warning - 2" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:if is="{$warning.warning_definition_id}">
	<xen:navigation>]]></find>
      <replace><![CDATA[<xen:if is="{$warning.warning_definition_id} or {$warning.is_custom}">
	<xen:navigation>]]></replace>
    </modification>
    <modification template="warning_edit" modification_key="SV_WarningImprovements_warning_edit3" description="Special case editing the Custom Warning - 3" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:title>{xen:if $warning.warning_definition_id]]></find>
      <replace><![CDATA[<xen:title>{xen:if '{$warning.warning_definition_id} or {$warning.is_custom}']]></replace>
    </modification>
    <modification template="warning_edit" modification_key="SV_WarningImprovements_warning_edit4" description="Special case editing the Custom Warning - 4" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#(<xen:textboxunit label="{xen:phrase title}:".*?/>)#si]]></find>
      <replace><![CDATA[<xen:if is="{$warning.is_custom}">
<input name="title" type="hidden" value="{$masterTitle}" />
<input name="is_custom" type="hidden" value="1" />
<fieldset>
<dl class="ctrlUnit"><dt>{xen:phrase title}:</dt><dd><em>{$masterTitle}</em></dd></dl>
</fieldset>
<xen:else />
$1
<xen:checkboxunit label="">
	<xen:option name="sv_custom_title" selected="{$warning.sv_custom_title}">{xen:phrase sv_custom_warning_title}</xen:option>
</xen:checkboxunit>
</xen:if>]]></replace>
    </modification>
    <modification template="warning_list" modification_key="SV_WarningImprovements_warning_list4" description="Warning Escalating Defaults" execution_order="4156" enabled="1" action="preg_replace">
      <find><![CDATA[#$#Usi]]></find>
      <replace><![CDATA[$0
<xen:include template="sv_warningimprovements_escalating_defaults" />]]></replace>
    </modification>
    <modification template="helper_criteria_user" modification_key="sv_warningimprovements_helper_criteria_user" description="" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#(<xen:hook name="user_criteria_content">.*?)(\s*)(</xen:hook>)#si]]></find>
      <replace><![CDATA[$1$2<xen:include template="sv_warningimprovements_criteria"/>$2$3]]></replace>
    </modification>
    <modification template="warning_action_edit" modification_key="sv_warningimprovements_warning_action_edit" description="Inject post to thread/form on warning action" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<xen:radiounit label="{xen:phrase action_to_take}:"]]></find>
      <replace><![CDATA[<xen:include template="sv_warning_action_edit" />
$0]]></replace>
    </modification>
    <modification template="warning_edit" modification_key="sv_warningimprovements_warning_edit4" description="Add category and display order inputs" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<fieldset>
		<xen:spinboxunit label="{xen:phrase warning_points}:" name="points_default" value="{$warning.points_default}" min="0" />]]></find>
      <replace><![CDATA[<xen:include template="sv_warning_edit_inputs" />
$0]]></replace>
    </modification>
    <modification template="warning_list" modification_key="sv_warningimprovements_warning_list1" description="Add &quot;Create Warning Category&quot; button" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<a href="{xen:adminlink warnings/add}" class="button">+ {xen:phrase create_new_warning}</a>]]></find>
      <replace><![CDATA[<a href="{xen:adminlink warnings/category-add}" class="button">+ {xen:phrase sv_create_new_warning_category}</a>
$0]]></replace>
    </modification>
    <modification template="warning_list" modification_key="sv_warningimprovements_warning_list2" description="Add &quot;Warning Defaults&quot; button" execution_order="100" enabled="1" action="preg_replace">
      <find><![CDATA[#(<xen:topctrl>.*?)(</xen:topctrl>)#Usi]]></find>
      <replace><![CDATA[$1
<a href="{xen:adminlink warnings/default/add}" class="button">+ {xen:phrase sv_create_new_warning_default}</a>
$2]]></replace>
    </modification>
    <modification template="warning_list" modification_key="sv_warningimprovements_warning_list3" description="Display warning items in jsTree instance" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#<xen:form action="{xen:adminlink warnings}" class="section">\s*<xen:if is="{\$warnings}">.*?</xen:form>#si]]></find>
      <replace><![CDATA[<xen:include template="sv_warning_list_jstree" />]]></replace>
    </modification>
    <modification template="warning_list" modification_key="sv_warningimprovements_warning_list5" description="Groups warning actions by category" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#<xen:if is="{\$warningActions}">[\S\s]+</xen:if>#]]></find>
      <replace><![CDATA[<xen:include template="sv_warning_action_list" />]]></replace>
    </modification>
  </admin_template_modifications>
  <code_events/>
  <code_event_listeners>
    <listener event_id="criteria_user" execute_order="10" callback_class="SV_WarningImprovements_Criteria" callback_method="criteriaUser" active="1" hint="" description="Add warning related criteria"/>
    <listener event_id="load_class" execute_order="0" callback_class="SV_WarningImprovements_Listener" callback_method="load_class_patch" active="1" hint="XenForo_Model_Warning" description="XenForo_Model_Warning (PATCH)"/>
    <listener event_id="load_class_controller" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Member" description="XenForo_ControllerPublic_Member"/>
    <listener event_id="load_class_controller" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerPublic_Warning" description="Xenforo_ControllerPublic_Warning"/>
    <listener event_id="load_class_controller" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ControllerAdmin_Warning" description="XenForo_ControllerAdmin_Warning"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_WarningDefinition" description="XenForo_DataWriter_WarningDefinition"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_ConversationMessage" description="XenForo_DataWriter_ConversationMessage"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_ConversationMaster" description="XenForo_DataWriter_ConversationMaster"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_UserBan" description="XenForo_DataWriter_UserBan"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_Warning" description="XenForo_DataWriter_Warning"/>
    <listener event_id="load_class_datawriter" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_DataWriter_WarningAction" description="XenForo_DataWriter_WarningAction"/>
    <listener event_id="load_class_model" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Warning" description="XenForo_Model_Warning"/>
    <listener event_id="load_class_model" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_User" description="XenForo_Model_User"/>
    <listener event_id="load_class_model" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_UserChangeTemp" description="XenForo_Model_UserChangeTemp"/>
    <listener event_id="load_class_model" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Model_Conversation" description="XenForo_Model_Conversation"/>
    <listener event_id="load_class_route_prefix" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_Route_PrefixAdmin_Warnings" description="XenForo_Route_PrefixAdmin_Warnings"/>
    <listener event_id="load_class_view" execute_order="10" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ViewAdmin_Warning_LoadTree" description="XenForo_ViewAdmin_Warning_LoadTree"/>
    <listener event_id="load_class_view" execute_order="4156" callback_class="SV_WarningImprovements_Listener" callback_method="load_class" active="1" hint="XenForo_ViewPublic_Member_WarnFill" description="XenForo_ViewPublic_Member_WarnFill"/>
  </code_event_listeners>
  <cron/>
  <email_templates/>
  <email_template_modifications/>
  <optiongroups>
    <group group_id="SV_WarningImprovements" display_order="141" debug_only="0"/>
    <option option_id="sv_force_conversation_email_on_warning" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="2000"/>
    </option>
    <option option_id="sv_only_force_warning_email_on_banned" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="2020"/>
    </option>
    <option option_id="sv_post_warning_summary" edit_format="textbox" data_type="integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="420"/>
    </option>
    <option option_id="sv_respect_receive_admin_email_on_warning" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="2010"/>
    </option>
    <option option_id="sv_show_discouraged_warning_actions" edit_format="radio" data_type="unsigned_integer" can_backup="1">
      <default_value>2</default_value>
      <edit_format_params>0={xen:phrase sv_discouraged_display_all}
1={xen:phrase sv_discouraged_display_moderators}
2={xen:phrase sv_discouraged_display_administrators}
3={xen:phrase sv_discouraged_display_none}</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="1000"/>
    </option>
    <option option_id="sv_view_own_warnings" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>true</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="410"/>
    </option>
    <option option_id="sv_warning_date_format" edit_format="textbox" data_type="string" can_backup="1">
      <default_value>F d, Y</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="430"/>
    </option>
    <option option_id="sv_warningimprovements_alert_send_default" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9105"/>
    </option>
    <option option_id="sv_warningimprovements_continue_button" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9100"/>
    </option>
    <option option_id="sv_warningimprovements_conversation_invite" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9120"/>
    </option>
    <option option_id="sv_warningimprovements_conversation_locked" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9130"/>
    </option>
    <option option_id="sv_warningimprovements_conversation_send_default" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9110"/>
    </option>
    <option option_id="sv_warningimprovements_copy_title" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>1</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9140"/>
    </option>
    <option option_id="sv_warningimprovements_default_content_action" edit_format="radio" data_type="string" can_backup="1">
      <default_value>public_warning</default_value>
      <edit_format_params>none={xen:phrase do_nothing}
delete_content={xen:phrase delete_the_content}
public_warning={xen:phrase post_public_warning}</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="9150"/>
    </option>
    <option option_id="sv_warningimprovements_warning_user" edit_format="template" data_type="string" can_backup="1" validation_class="SV_WarningImprovements_Option_UserName" validation_method="verifyOption_AllowNone">
      <default_value></default_value>
      <edit_format_params>option_list_option_textbox_autocomplete</edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="400"/>
    </option>
    <option option_id="sv_wi_require_warning_notes" edit_format="onoff" data_type="boolean" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="350"/>
    </option>
    <option option_id="sv_wi_warning_note_chars" edit_format="spinbox" data_type="unsigned_integer" can_backup="1">
      <default_value>0</default_value>
      <edit_format_params></edit_format_params>
      <sub_options></sub_options>
      <relation group_id="SV_WarningImprovements" display_order="351"/>
    </option>
  </optiongroups>
  <permissions>
    <permission_groups/>
    <permissions>
      <permission permission_group_id="general" permission_id="sv_editWarningActions" permission_type="flag" default_value="unset" interface_group_id="generalModeratorPermissions" display_order="260"/>
      <permission permission_group_id="general" permission_id="sv_showAllWarningActions" permission_type="flag" default_value="unset" interface_group_id="generalModeratorPermissions" display_order="270"/>
      <permission permission_group_id="general" permission_id="sv_viewWarningActions" permission_type="flag" default_value="unset" interface_group_id="generalModeratorPermissions" display_order="250"/>
      <permission permission_group_id="general" permission_id="viewWarning_issuer" permission_type="flag" default_value="unset" interface_group_id="generalPermissions" display_order="11005"/>
    </permissions>
    <interface_groups/>
  </permissions>
  <phrases>
    <phrase title="option_group_SV_WarningImprovements" version_id="100000" version_string="1.0.0"><![CDATA[Warning Improvements]]></phrase>
    <phrase title="option_group_SV_WarningImprovements_description" version_id="100000" version_string="1.0.0"><![CDATA[A collection of improvements and configurables for XF's warning system.]]></phrase>
    <phrase title="option_sv_force_conversation_email_on_warning" version_id="101001" version_string="1.1.1"><![CDATA[Force conversation email on Warning]]></phrase>
    <phrase title="option_sv_force_conversation_email_on_warning_explain" version_id="101001" version_string="1.1.1"><![CDATA[Forces an email to be send when a user receives a warning conversation. Sends email if the user is banned.]]></phrase>
    <phrase title="option_sv_only_force_warning_email_on_banned" version_id="101001" version_string="1.1.1"><![CDATA[Only send warning email if user is banned]]></phrase>
    <phrase title="option_sv_only_force_warning_email_on_banned_explain" version_id="101001" version_string="1.1.1"><![CDATA[Only send warning emails when the user is in a banned state.]]></phrase>
    <phrase title="option_sv_post_warning_summary" version_id="1020200" version_string="1.2.2"><![CDATA[Post Warning summary to thread]]></phrase>
    <phrase title="option_sv_post_warning_summary_explain" version_id="1020200" version_string="1.2.2"><![CDATA[Thread Id, Zero to disable.]]></phrase>
    <phrase title="option_sv_respect_receive_admin_email_on_warning" version_id="101001" version_string="1.1.1"><![CDATA[Respect receive site mailings setting]]></phrase>
    <phrase title="option_sv_respect_receive_admin_email_on_warning_explain" version_id="101001" version_string="1.1.1"><![CDATA[Only sends email if the user has allowed "Receive site mailings"]]></phrase>
    <phrase title="option_sv_show_discouraged_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[Show Discouraged Warning Action]]></phrase>
    <phrase title="option_sv_show_discouraged_warning_actions_explain" version_id="101000" version_string="1.1.0"><![CDATA[Limits who can see that warning actions with discouragment exist.]]></phrase>
    <phrase title="option_sv_view_own_warnings" version_id="1020200" version_string="1.2.2"><![CDATA[View Own Warnings]]></phrase>
    <phrase title="option_sv_view_own_warnings_explain" version_id="1020200" version_string="1.2.2"><![CDATA[Allow users to see their own warnings]]></phrase>
    <phrase title="option_sv_warningimprovements_alert_send_default" version_id="1030100" version_string="1.3.1"><![CDATA[Send Warning Alert By Default]]></phrase>
    <phrase title="option_sv_warningimprovements_alert_send_default_explain" version_id="1030100" version_string="1.3.1"><![CDATA[By Default, sending warning alerts.]]></phrase>
    <phrase title="option_sv_warningimprovements_continue_button" version_id="2" version_string="0.02"><![CDATA[Add Continue Button on Warning]]></phrase>
    <phrase title="option_sv_warningimprovements_continue_button_explain" version_id="2" version_string="0.02"><![CDATA[Force a continue button to replace the "warn" button for all but the last tab.]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_invite" version_id="100010" version_string="1.0.1"><![CDATA[Allow Invite into Warning Conversations By Default]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_invite_explain" version_id="100010" version_string="1.0.1"><![CDATA[By Default, check inviting others into a warning conversation.]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_locked" version_id="2" version_string="0.02"><![CDATA[Lock Warning Conversations]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_locked_explain" version_id="2" version_string="0.02"><![CDATA[By Default, lock warning conversations.]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_send_default" version_id="100010" version_string="1.0.1"><![CDATA[Send Warning Conversations By Default]]></phrase>
    <phrase title="option_sv_warningimprovements_conversation_send_default_explain" version_id="100010" version_string="1.0.1"><![CDATA[By Default, sending warning conversations.]]></phrase>
    <phrase title="option_sv_warningimprovements_copy_title" version_id="2" version_string="0.02"><![CDATA[Copy Warning Title to Public Warning]]></phrase>
    <phrase title="option_sv_warningimprovements_copy_title_explain" version_id="2" version_string="0.02"><![CDATA[Pre-fill the content action "Post a public warning" with the title of the warning.]]></phrase>
    <phrase title="option_sv_warningimprovements_default_content_action" version_id="2" version_string="0.02"><![CDATA[Default Content Action]]></phrase>
    <phrase title="option_sv_warningimprovements_default_content_action_explain" version_id="2" version_string="0.02"><![CDATA[]]></phrase>
    <phrase title="option_sv_warningimprovements_warning_user" version_id="1030006" version_string="1.3.0 RC6"><![CDATA[Anonymise As]]></phrase>
    <phrase title="option_sv_warningimprovements_warning_user_explain" version_id="1030006" version_string="1.3.0 RC6"><![CDATA[Anonymise warnings and warning alerts as a given user if the warned user does not have the 'View warning issuer' permission.<br/>
If Empty, uses the phrase 'WarningStaff'.<br/>
Conversations can <b>not</b> be anonymised.<br/>
Changing this is only retroactive for Warnings, not Warning Alerts.]]></phrase>
    <phrase title="option_sv_warning_date_format" version_id="1020204" version_string="1.2.2 RC4"><![CDATA[Warning Date Format]]></phrase>
    <phrase title="option_sv_warning_date_format_explain" version_id="1020204" version_string="1.2.2 RC4"><![CDATA[The Date format string, see <a href="http://php.net/manual/en/function.date.php">php.net</a> for details.]]></phrase>
    <phrase title="option_sv_wi_require_warning_notes" version_id="100040" version_string="1.0.4"><![CDATA[Require Notes for Warning]]></phrase>
    <phrase title="option_sv_wi_require_warning_notes_explain" version_id="100040" version_string="1.0.4"><![CDATA[Makes the Notes field required when creating a warning]]></phrase>
    <phrase title="option_sv_wi_warning_note_chars" version_id="1060200" version_string="1.6.2"><![CDATA[Minimum Note Length]]></phrase>
    <phrase title="option_sv_wi_warning_note_chars_explain" version_id="1070100" version_string="1.7.1"><![CDATA[The minimum amount of characters required for warning notes. Setting this to 0 will disable.<br/>
<br/>
Requires "Require Notes for Warning" to be enabled]]></phrase>
    <phrase title="permission_general_sv_editWarningActions" version_id="101000" version_string="1.1.0"><![CDATA[Edit Warning Actions]]></phrase>
    <phrase title="permission_general_sv_showAllWarningActions" version_id="101000" version_string="1.1.0"><![CDATA[Don't Summarize Warning Actions]]></phrase>
    <phrase title="permission_general_sv_viewWarningActions" version_id="101000" version_string="1.1.0"><![CDATA[View Warning Actions]]></phrase>
    <phrase title="permission_general_viewWarning_issuer" version_id="100" version_string="1.0.0"><![CDATA[View warning issuer]]></phrase>
    <phrase title="send_alert_on_warning" version_id="100000" version_string="1.0.0"><![CDATA[Send alert on warning]]></phrase>
    <phrase title="svwi_the_user_x_could_not_be_found" version_id="1030200" version_string="1.3.2"><![CDATA[The user {name} could not be found.]]></phrase>
    <phrase title="sv_allowed_user_groups" version_id="1040100" version_string="1.4.1"><![CDATA[Allowed User Groups]]></phrase>
    <phrase title="sv_choose_a_warning" version_id="1040000" version_string="1.4.0"><![CDATA[Choose a warning...]]></phrase>
    <phrase title="sv_confirm_delete_warning_category_footnote" version_id="1050004" version_string="1.5.0 RC 4"><![CDATA[<strong>Any children of this category will also be deleted. This includes subcategories, warning definitions, and warning actions.</strong>]]></phrase>
    <phrase title="sv_confirm_deletion_of_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Confirm Deletion of Warning Category]]></phrase>
    <phrase title="sv_confirm_deletion_of_warning_default" version_id="102001" version_string="1.2.0"><![CDATA[Confirm Deletion of Warning Default.]]></phrase>
    <phrase title="sv_create_new_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Create New Warning Category]]></phrase>
    <phrase title="sv_create_new_warning_default" version_id="102001" version_string="1.2.0"><![CDATA[Create New Warning Defaults]]></phrase>
    <phrase title="sv_custom_warning_title" version_id="1070000" version_string="1.7.0"><![CDATA[Allow editable warning title when giving warning]]></phrase>
    <phrase title="sv_delete_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Delete Warning Category]]></phrase>
    <phrase title="sv_delete_warning_default" version_id="102001" version_string="1.2.0"><![CDATA[Delete Warning Default]]></phrase>
    <phrase title="sv_discouraged_display_administrators" version_id="101000" version_string="1.1.0"><![CDATA[Administrators]]></phrase>
    <phrase title="sv_discouraged_display_all" version_id="101000" version_string="1.1.0"><![CDATA[User, moderators, administrator]]></phrase>
    <phrase title="sv_discouraged_display_moderators" version_id="101000" version_string="1.1.0"><![CDATA[Moderators or administrators]]></phrase>
    <phrase title="sv_discouraged_display_none" version_id="101000" version_string="1.1.0"><![CDATA[Never]]></phrase>
    <phrase title="sv_edit_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Edit Warning Category]]></phrase>
    <phrase title="sv_edit_warning_default" version_id="102001" version_string="1.2.0"><![CDATA[Edit Warning Default]]></phrase>
    <phrase title="sv_global_warning_actions" version_id="1050001" version_string="1.5.0 Alpha 1"><![CDATA[Global Warning Actions]]></phrase>
    <phrase title="sv_increase_default_expiry_by_x" version_id="102001" version_string="1.2.0"><![CDATA[ increase default expiry by {length}]]></phrase>
    <phrase title="sv_issued_warning" version_id="1070100" version_string="1.7.1"><![CDATA[Issued Warning]]></phrase>
    <phrase title="sv_no_permission_to_give_warning" version_id="1040100" version_string="1.4.1"><![CDATA[You don't have permission to give this warning.]]></phrase>
    <phrase title="sv_no_permission_to_give_warnings" version_id="1040500" version_string="1.4.5"><![CDATA[You don't have permission to any warnings.]]></phrase>
    <phrase title="sv_no_results_match" version_id="1040000" version_string="1.4.0"><![CDATA[No results match]]></phrase>
    <phrase title="sv_parent_category" version_id="1040000" version_string="1.4.0"><![CDATA[Parent Category]]></phrase>
    <phrase title="sv_please_confirm_that_you_want_to_delete_following_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Please confirm that you want to delete the following warning category]]></phrase>
    <phrase title="sv_please_enter_note_with_at_least_x_characters" version_id="1060200" version_string="1.6.2"><![CDATA[Please enter a note with at least {count} characters.
<br />
Note is under by {under} characters.]]></phrase>
    <phrase title="sv_please_enter_valid_parent_warning_category_id" version_id="1040000" version_string="1.4.0"><![CDATA[Please enter a valid parent warning category ID.]]></phrase>
    <phrase title="sv_please_enter_valid_warning_category_id" version_id="1040000" version_string="1.4.0"><![CDATA[Please enter a valid warning category ID.]]></phrase>
    <phrase title="sv_rename" version_id="1040000" version_string="1.4.0"><![CDATA[Rename]]></phrase>
    <phrase title="sv_requested_warning_action_not_found" version_id="101000" version_string="1.1.0"><![CDATA[The requested warning action could not be found.]]></phrase>
    <phrase title="sv_requested_warning_category_not_found" version_id="1040000" version_string="1.4.0"><![CDATA[The requested warning category could not be found.]]></phrase>
    <phrase title="sv_requested_warning_default_not_found" version_id="102001" version_string="1.2.0"><![CDATA[The requested warning defaults could not be found.]]></phrase>
    <phrase title="sv_save_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Save Warning Category]]></phrase>
    <phrase title="sv_save_warning_default" version_id="102001" version_string="1.2.0"><![CDATA[Save Warning Default]]></phrase>
    <phrase title="sv_this_user_has_no_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[This user has no warning actions]]></phrase>
    <phrase title="sv_toggle_radio_view" version_id="1040000" version_string="1.4.0"><![CDATA[Use radio view]]></phrase>
    <phrase title="sv_toggle_select_view" version_id="1040000" version_string="1.4.0"><![CDATA[Use select view]]></phrase>
    <phrase title="sv_update_warning_action" version_id="101000" version_string="1.1.0"><![CDATA[Update Warning Action]]></phrase>
    <phrase title="sv_user_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[Warning Actions ({count})]]></phrase>
    <phrase title="sv_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[Warning Actions]]></phrase>
    <phrase title="sv_warning_action_added_to_user_groups" version_id="101000" version_string="1.1.0"><![CDATA[Added to user groups]]></phrase>
    <phrase title="sv_warning_action_expiry" version_id="101000" version_string="1.1.0"><![CDATA[Warning Action Expiry]]></phrase>
    <phrase title="sv_warning_action_for_x" version_id="101000" version_string="1.1.0"><![CDATA[Warning action for {name}]]></phrase>
    <phrase title="sv_warning_action_post_as_user" version_id="1060200" version_string="1.6.2"><![CDATA[The User Id to post as. 0 to user the user triggering the warning.]]></phrase>
    <phrase title="sv_warning_action_post_new_thread" version_id="1050007" version_string="1.5.0 RC 7"><![CDATA[Post message to a new thread in the given forum when this warning action is triggered. Zero to disable.<br/>
<br/>
New Thread trumps replying to a thread. Only the last warning action is applied when posting.<br/>
<br/>
Edit the phases:<ul>
<li>Warning_Thread_Message</li>
<li>Warning_Thread_Title</li>
</ul>
]]></phrase>
    <phrase title="sv_warning_action_post_thread_reply" version_id="1050007" version_string="1.5.0 RC 7"><![CDATA[Post message to an existing thread when this warning action is triggered. Zero to disable.<br/>
<br/>
Edit the phases:<ul>
<li>Warning_Thread_Message</li>
</ul>
]]></phrase>
    <phrase title="sv_warning_action_result" version_id="101000" version_string="1.1.0"><![CDATA[Result]]></phrase>
    <phrase title="sv_warning_action_type" version_id="101000" version_string="1.1.0"><![CDATA[Action Type]]></phrase>
    <phrase title="sv_warning_categories" version_id="1040000" version_string="1.4.0"><![CDATA[Warning Categories]]></phrase>
    <phrase title="sv_warning_category" version_id="1040000" version_string="1.4.0"><![CDATA[Warning Category]]></phrase>
    <phrase title="sv_warning_category_1_title" version_id="1050000" version_string="1.5.0"><![CDATA[Warning]]></phrase>
    <phrase title="sv_warning_default_applied_crossing_threshold" version_id="1060200" version_string="1.6.2"><![CDATA[This warning default will only be applied when a user is issued a warning with their total warning points above this points threshold. ]]></phrase>
    <phrase title="sv_warning_default_is_active" version_id="102001" version_string="1.2.0"><![CDATA[Is active]]></phrase>
    <phrase title="sv_warning_expiry_extension" version_id="102001" version_string="1.2.0"><![CDATA[Expiry Extension]]></phrase>
    <phrase title="sv_warning_expiry_extension_explain" version_id="102001" version_string="1.2.0"><![CDATA[The duration to add to the warning's default expiry period when above the threshold]]></phrase>
    <phrase title="sv_warning_include_expired" version_id="1051000" version_string="1.5.10"><![CDATA[Include Expired]]></phrase>
    <phrase title="sv_warning_node_id" version_id="1030007" version_string="1.3.0 RC7"><![CDATA[Post to Forum]]></phrase>
    <phrase title="sv_warning_post_as_user_id" version_id="1020200" version_string="1.2.2"><![CDATA[User Id To Post As]]></phrase>
    <phrase title="sv_warning_thread_id" version_id="1030007" version_string="1.3.0 RC7"><![CDATA[Reply to thread]]></phrase>
    <phrase title="sv_wa_minutes" version_id="101000" version_string="1.1.0"><![CDATA[Minutes]]></phrase>
    <phrase title="sv_x_weeks" version_id="102001" version_string="1.2.0"><![CDATA[{weeks} Weeks]]></phrase>
    <phrase title="user_has_received_at_least_x_warnings_points" version_id="3" version_string="0.0.3"><![CDATA[User has received at least X warnings points]]></phrase>
    <phrase title="user_has_received_at_most_x_warnings_count" version_id="1051000" version_string="1.5.10"><![CDATA[User has received at most X warnings]]></phrase>
    <phrase title="user_has_received_at_most_x_warnings_points" version_id="3" version_string="0.0.3"><![CDATA[User has received at most X warnings points]]></phrase>
    <phrase title="WarningStaff" version_id="100" version_string="1.0.0"><![CDATA[Moderation Staff]]></phrase>
    <phrase title="warning_alert_text" version_id="100000" version_string="1.0.0"><![CDATA[{name} issued you a warning for <a {warning_attributes}>{warning_title}</a> for {points} points.]]></phrase>
    <phrase title="warning_alert_text_anonymize" version_id="100000" version_string="1.0.0"><![CDATA[You have received a warning for <a {warning_attributes}>{warning_title}</a> for {points} points.]]></phrase>
    <phrase title="warning_definition_0_title" version_id="101011" version_string="1.1.1s"><![CDATA[Custom Warning]]></phrase>
    <phrase title="warning_escalating_defaults" version_id="102001" version_string="1.2.0"><![CDATA[Warning Escalating Defaults]]></phrase>
    <phrase title="Warning_Summary_Message" version_id="1020200" version_string="1.2.2"><![CDATA[{points} points to @{username} for {title}, {report}
{notes}]]></phrase>
    <phrase title="Warning_Thread_Message" version_id="1030006" version_string="1.3.0 RC6"><![CDATA[@{username} received {warning_points} warning points and is above the {threshold} warning point threshold, with a total accumulated {points} active warning points. Triggering report: {report}]]></phrase>
    <phrase title="Warning_Thread_Title" version_id="1020204" version_string="1.2.2 RC4"><![CDATA[{username} has accumulated {points} warning points on {date}]]></phrase>
  </phrases>
  <route_prefixes>
    <route_type type="public">
      <prefix original_prefix="warning-actions" class="SV_WarningImprovements_Route_Prefix_WarningAction" build_link="data_only"/>
    </route_type>
  </route_prefixes>
  <style_properties/>
  <templates>
    <template title="alert_warning_alert_warning" version_id="100000" version_string="1.0.0"><![CDATA[
<xen:if is="{$user.user_id}">
{xen:phrase warning_alert_text,
'name={xen:helper username, $user, 'subject'}',
'warning_attributes=href="{xen:link warnings, $content}" class="PopupItemLink"',
'points={$content.points}',
'warning_title={$content.title}'
}
<xen:else/>
{xen:phrase warning_alert_text_anonymize,
'warning_attributes=href="{xen:link warnings, $content}" class="PopupItemLink"',
'points={$content.points}',
'warning_title={$content.title}'
}
</xen:if>
]]></template>
    <template title="sv_member_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[<xen:title>{xen:phrase warnings}: {$user.username}</xen:title>
<xen:h1>{xen:phrase warnings}</xen:h1>

<xen:navigation>
	<xen:breadcrumb href="{xen:link full:members, $user}">{$user.username}</xen:breadcrumb>
</xen:navigation>

<xen:require css="member_view.css" />

<div class="warningActionList">
<table class="dataTable" style="table-layout: fixed">
<tr class="dataRow">
	<th class="warningActionType" width="20%">{xen:phrase sv_warning_action_type}</th>
	<th class="warningActionResult">{xen:phrase sv_warning_action_result}</th>
	<th class="warningActionExpiry">{xen:phrase sv_warning_action_expiry}</th>
	<th class="warningActionView">&nbsp;</th>
</tr>
<xen:foreach loop="$warningActions" value="$warningAction">
	<tr class="dataRow {xen:if $warning.is_expired, muted}">
		<td class="warningActionType">{$warningAction.name}</td>
		<td class="warningActionResult">{$warningAction.result}</td>
		<td class="warningActionExpiry"><xen:if is="{$warningAction.expiry_date_rounded}"><xen:datetime time="{$warningAction.expiry_date_rounded}" /><xen:else />{xen:phrase n_a}</xen:if></td>
		<td class="warningActionView dataOptions"><a href="{xen:link warning-actions, $warningAction}" class="OverlayTrigger secondaryContent">{xen:phrase view}</a></td>
	</tr>
</xen:foreach>
</table>
</div>]]></template>
    <template title="sv_member_warn_chooser" version_id="1070000" version_string="1.7.0"><![CDATA[<link rel="stylesheet" href="styles/chosen/chosen.min.css" />
<xen:require css="sv_member_warn_chooser.css" />

<xen:if is="{$debugMode}">
	<xen:require js="js/chosen/chosen.jquery.js" />
	<xen:require js="js/SV/WarningImprovements/full/warnings.js" />
<xen:else />
	<xen:require js="js/chosen/chosen.jquery.min.js" />
	<xen:require js="js/SV/WarningImprovements/warnings.js" />
</xen:if>

<div id="warningViewSelect" class="JsOnly" style="display:none;">
	<dl class="ctrlUnit">
		<dt>{xen:phrase warning_type}:</dt>

		<dd>
			<select class="warningItems WarningSelector" name="warning_definition_id"
				data-customwarningtitle="#customWarningTitle"
				data-noresultstext="{xen:phrase sv_no_results_match}"
				data-placeholdertext="{xen:phrase sv_choose_a_warning}">
				<option></option>

				<xen:foreach loop="$warningCategories" value="$warningCategory">
					<optgroup class="warningCategory" label="{$warningCategory.title}">
						<xen:foreach loop="$warningCategory.warnings" value="$warning">
							<option class="warningDefinition FormFiller" value="{$warning.warning_definition_id}" {xen:if {$warning.sv_custom_title}, 'data-custom-title="1"', ''}>{$warning.title}</option>
						</xen:foreach>
					</optgroup>
				</xen:foreach>
			</select>

			<input id="customWarningTitle" class="textCtrl" style="display:none" type="text" name="title" placeholder="{xen:phrase custom_warning}..." maxlength="255" />
		</dd>
	</dl>
</div>

<div id="warningViewRadio">
	<xen:foreach loop="$rootWarningCategories" value="$rootWarningCategory">
		<dl class="ctrlUnit">
			<dt class="warningCategory">{$rootWarningCategory.title}:</dt>

			<dd>
				<ul class="warningItems">
					<xen:foreach loop="$rootWarningCategory.children" value="$warningItem">
						<xen:if is="{$warningItem.warning_category_id}">
							<li class="warningCategory _depth{$warningItem.depth}">{$warningItem.title}</li>
						<xen:else />
							<xen:if is="{$warningItem.warning_definition_id} != 0">
								<li class="warningDefinition _depth{$warningItem.depth}"><label><input type="radio" name="warning_definition_id" id="warning_{$warningItem.warning_definition_id}" class="FormFiller {xen:if '{$warningItem.sv_custom_title}', 'Disabler', ''}" value="{$warningItem.warning_definition_id}" {xen:if {$warning.sv_custom_title}, 'data-custom-title="1"', ''}/> {$warningItem.title}</label>
								<xen:if is="{$warningItem.sv_custom_title}">
									<ul id="warning_{$warningItem.warning_definition_id}_Disabler">
										<li><input type="text" name="title" class="textCtrl" value="{$warningItem.title}" maxlength="255" /></li>
									</ul>
								</xen:if>
								</li>
							<xen:else />
								<li class="warningDefinition _depth{$warningItem.depth}"><label><input type="radio" name="warning_definition_id" class="FormFiller Disabler" value="0" id="customWarning" checked="checked" /> {xen:phrase custom_warning}:</label>
									<ul id="customWarning_Disabler">
										<li><input type="text" name="title" class="textCtrl" placeholder="{xen:phrase custom_warning}..." maxlength="255" /></li>
									</ul>
								</li>
							</xen:if>
						</xen:if>
					</xen:foreach>
				</ul>
			</dd>
		</dl>
	</xen:foreach>
</div>

<a id="warningViewToggle" class="WarningViewToggler JsOnly" href="#"
	data-selectview="#warningViewSelect"
	data-radioview="#warningViewRadio"
	data-toggleselecttext="{xen:phrase sv_toggle_select_view}"
	data-toggleradiotext="{xen:phrase sv_toggle_radio_view}"></a>]]></template>
    <template title="sv_member_warn_chooser.css" version_id="1040600" version_string="1.4.6"><![CDATA[#warningViewSelect dd
{
	overflow: visible;
}

#warningViewSelect select
{
	width: 100%;
}

#warningViewSelect #customWarningTitle
{
	margin: 6px 0;
}

#warningViewRadio li:not(:first-child)
{
	margin: 6px 0;
}

.ctrlUnit li._depth1 { padding-left: 0em; }
.ctrlUnit li._depth2 { padding-left: 2em; }

#warningViewRadio .warningCategory
{
	font-weight: bold;
}

#warningViewToggle
{
	box-sizing: border-box;
	display: block;
	font-size: 11px;
	margin-left: 4px;
	padding-right: 15px;
	padding-top: 4px;
	text-align: right;
	vertical-align: top;
	width: 32%;
}]]></template>
    <template title="sv_warningimprovements_member_view_warning_actions" version_id="101000" version_string="1.1.0"><![CDATA[<xen:if is="{$warningActionsCount}">
	<li id="warningActions" class="profileContent" data-loadUrl="{xen:link members/warning-actions, $user}">
		{xen:phrase loading}...
		<noscript><a href="{xen:link members/warning-actions, $user}">{xen:phrase view}</a></noscript>
	</li>
</xen:if>]]></template>
    <template title="sv_warning_actions_info" version_id="101000" version_string="1.1.0"><![CDATA[<xen:title>{xen:phrase sv_warning_action_for_x, 'name={$user.username}'}</xen:title>

<xen:navigation>
	<xen:breadcrumb href="{xen:link members, $user}">{$user.username}</xen:breadcrumb>
</xen:navigation>

<div class="xenForm formOverlay overlayScroll">
	<dl class="ctrlUnit">
		<dt>{xen:phrase sv_warning_action_type}:</dt>
		<dd>{$warningAction.name}, <xen:datetime time="{$warningAction.create_date}" /></dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase sv_warning_action_result}:</dt>
		<dd>{$warningAction.result}</dd>
	</dl>

	<dl class="ctrlUnit">
		<dt>{xen:phrase sv_warning_action_expiry}:</dt>
		<dd><xen:if is="{$warningAction.expiry_date_rounded}"><xen:datetime time="{$warningAction.expiry_date_rounded}" /><xen:else />{xen:phrase n_a}</xen:if></dd>
	</dl>

	<xen:if is="{$canEditUserWarningActions}">
		<ul class="tabs Tabs" data-panes="#WarningActionTabs_{$warningAction.warning_action_id} > form">
			<li><a href="javascript:">{xen:phrase sv_update_warning_action}</a></li>
		</ul>
	</xen:if>

	<div id="WarningActionTabs_{$warningAction.warning_action_id}">

		<xen:if is="{$canEditUserWarningActions}">
			<form action="{xen:link warning-actions/expire, $warningAction}" method="post">
				<dl class="ctrlUnit">
					<dt></dt>
					<dd><ul>
						<li><label><input type="radio" name="expire" value="now" checked="checked" /> {xen:phrase expire_now}</label></li>
						<li><label><input type="radio" name="expire" value="future" id="ExpireWarningFuture_{$warningAction.warning_action_id}" class="Disabler" /> {xen:phrase expire_in_time}:</label>
							<ul id="ExpireWarningFuture_{$warningAction.warning_action_id}_Disabler">
								<li>
									<input type="text" size="5" name="expiry_length" value="1" class="textCtrl autoSize" />
									<select name="expiry_unit" class="textCtrl autoSize">
										<option value="minutes">{xen:phrase sv_wa_minutes}</option>
										<option value="hours">{xen:phrase hours}</option>
										<option value="days" selected="selected">{xen:phrase days}</option>
										<option value="weeks">{xen:phrase weeks}</option>
										<option value="months">{xen:phrase months}</option>
									</select>
								</li>
							</ul>
						</li>
					</ul></dd>
				</dl>
				<dl class="ctrlUnit submitUnit">
					<dt></dt>
					<dd>
						<input type="submit" value="{xen:phrase sv_update_warning_action}" class="button primary" />
					</dd>
				</dl>

				<input type="hidden" name="_xfConfirm" value="1" />
				<input type="hidden" name="redirect" value="{$redirect}" />
				<input type="hidden" name="_xfToken" value="{$visitor.csrf_token_page}" />
			</form>
		</xen:if>
	</div>
</div>]]></template>
    <template title="sv_warning_improvement_js" version_id="1070000" version_string="1.7.0"><![CDATA[<script>
!function($, window, document, _undefined)
{
	<xen:if is="{$xenOptions.sv_warningimprovements_continue_button}">
	$warningForm = $(".warningHeader").closest('form');
	$warningSubmitButton = $warningForm.find('dl.submitUnit input[type=submit]').first();
	$dl = $warningSubmitButton.parent();
	$dl.append('<input type="button" class="continue button" value="{xen:phrase continue}"/>');
	$warningContinueButton = $dl.find('.continue');
	$warningSubmitButton.hide();

	$warningForm.find('.tabs li a').click(function(e) {
		if ($(e.target).parent().next().length === 0){
			$warningSubmitButton.show();
			$warningContinueButton.hide();
		}
		else {
			$warningSubmitButton.hide();
			$warningContinueButton.show();
		}
	});

	$warningContinueButton.click(function(e) {
		var $next = $warningForm.find('.tabs li .active').parent().next();
		if ($next.length !== 0) {
			$next.find('a').click().focus();
		}
	});
	</xen:if>
	XenForo.WarningDefaultActionFormFillerControl = function($input)
	{
		if ($input.val() == '{$xenOptions.sv_warningimprovements_default_content_action}') {
			$input.prop("checked", true);
			var Disabler = $input.data('XenForo.Disabler');
			if (Disabler && typeof Disabler == 'object')
			{
				Disabler.setStatus(null, 1);
			}
		}
	}
	XenForo.register('input[name=content_action]', 'XenForo.WarningDefaultActionFormFillerControl');
	<xen:if is='{$xenOptions.sv_warningimprovements_copy_title}'>
	XenForo.CustomWarningTitle = function($control)
	{
		$control.change(function (e){
			$('input[name=public_warning]').val($control.val());
		});
	}
	XenForo.register('input[name=title]', 'XenForo.CustomWarningTitle');
	XenForo.WarningDefRadioButton = function($control)
	{
		$control.change(function (e){
			$('input[name=public_warning]').val($(e.target).closest('label').text());
		});
	}
	XenForo.register('input[name=warning_definition_id][id!=customWarning]', 'XenForo.WarningDefRadioButton');
	XenForo.CustomWarningRadioButton = function($input)
	{
		$input.trigger('click');
	}
	XenForo.register('input#customWarning', 'XenForo.CustomWarningRadioButton');
	XenForo.WarningDefSelectOption = function($select)
	{
		$select.change(function(e) {
			var id = $(e.target).val();

			if (id != 0)
			{
				$('input[name=public_warning]').val($(e.target).find('option[value="'+id+'"]').text());
			}
			else
			{
				$('input[name=public_warning]').val($('input[name=title]').val());
			}
		});
	}
	XenForo.register('select.warningItems', 'XenForo.WarningDefSelectOption');
	</xen:if>
}
(jQuery, this, document);
</script>]]></template>
  </templates>
  <public_template_modifications>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn1" description="Display warning items by category with Chosen support" execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#<dl class="ctrlUnit">\s*<dt>{xen:phrase warning_type}:</dt>.*?<dd>.*?\s*</dd>\s*</dl>#si]]></find>
      <replace><![CDATA[<xen:include template="sv_member_warn_chooser" />]]></replace>
    </modification>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn2" description="Conversation Inviting" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<input type="checkbox" name="open_invite" value="1"]]></find>
      <replace><![CDATA[$0 {xen:if '{$xenOptions.sv_warningimprovements_conversation_invite}', 'checked="checked"'}]]></replace>
    </modification>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn3" description="Conversation locking" execution_order="10" enabled="1" action="str_replace">
      <find><![CDATA[<input type="checkbox" name="conversation_locked" value="1"]]></find>
      <replace><![CDATA[$0 {xen:if '{$xenOptions.sv_warningimprovements_conversation_locked}', 'checked="checked"'}]]></replace>
    </modification>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn4" description="Sending Alerts on recieving a warning." execution_order="10" enabled="1" action="preg_replace">
      <find><![CDATA[#(<dt>{xen:phrase member_notification}:</dt>.*?<dd>.*?)(</dd>)#s]]></find>
      <replace><![CDATA[$1$2
<dt></dt>
<dd><label><input type="checkbox" name="send_warning_alert" value="1" {xen:checked "{$xenOptions.sv_warningimprovements_alert_send_default}"} /> {xen:phrase send_alert_on_warning}</label></dd>]]></replace>
    </modification>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn5" description="Insert extra javascript" execution_order="1" enabled="1" action="str_replace">
      <find><![CDATA[</script>]]></find>
      <replace><![CDATA[$0
<xen:include template="sv_warning_improvement_js"/>]]></replace>
    </modification>
    <modification template="member_warn" modification_key="SV_WarningImprovements_member_warn6" description="Add AutoValidator &amp; redirect on-submit support" execution_order="6" enabled="1" action="preg_replace">
      <find><![CDATA[#(<form.*?members/warn.*?class="xenForm[^"]*)(")#si]]></find>
      <replace><![CDATA[$1 AutoValidator" data-redirect="true"]]></replace>
    </modification>
    <modification template="member_view" modification_key="sv_warningimprovements_member_view1" description="Warning Actions (header)" execution_order="100" enabled="1" action="str_replace">
      <find><![CDATA[<xen:hook name="member_view_tabs_heading"]]></find>
      <replace><![CDATA[<xen:if is="{$warningActionsCount}"><li><a href="{$requestPaths.requestUri}#warningActions">{xen:phrase sv_user_warning_actions, 'count={$warningActionsCount}'}</a></li></xen:if>
$0]]></replace>
    </modification>
    <modification template="member_view" modification_key="sv_warningimprovements_member_view2" description="Warning Actions (body)" execution_order="100" enabled="1" action="preg_replace">
      <find><![CDATA[#(\s*)(<xen:hook name="member_view_tabs_content")#Us]]></find>
      <replace><![CDATA[$1<xen:include template="sv_warningimprovements_member_view_warning_actions" />
$1$2]]></replace>
    </modification>
  </public_template_modifications>
  <bb_code_media_sites/>
  <bb_codes/>
</addon>
